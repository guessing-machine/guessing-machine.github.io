<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Editor</title>
  <style>
    .editor-container {
      width: 100%;
      max-width: 100%;
      margin: 0;
      padding: 16px;
      background-color: #fff;
      border: 1px solid #d1d5da;
      border-radius: 6px;
      min-height: 200px;
      outline: none;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
      font-size: 16px;
      line-height: 1.5;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .editor-container:focus {
      border-color: #0366d6;
      box-shadow: 0 0 0 3px rgba(3, 102, 214, 0.3);
    }
    .editor-container[contenteditable="true"]:empty:before {
      content: attr(placeholder);
      color: #6a737d;
    }
    .status-message {
      margin-top: 8px;
      font-size: 14px;
      color: #6a737d;
    }
  </style>
</head>
<body>
  <div class="container-md px-3 my-5">
    <div class="editor-container" contenteditable="true" placeholder="Start typing here..."></div>
    <div class="status-message" id="status">Autosaved</div>
  </div>
  <script>
    const editor = document.querySelector('.editor-container');
    const status = document.querySelector('#status');
    const AUTO_SAVE_DELAY = 3000; // 3 seconds of inactivity
    let saveTimeout = null;

    // Preload Lorem Ipsum or saved text
    const defaultText = `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.

Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;
    const savedText = localStorage.getItem('editorContent');
    editor.textContent = savedText || defaultText;

    // Set cursor to end of text
    const range = document.createRange();
    const selection = window.getSelection();
    range.selectNodeContents(editor);
    range.collapse(false);
    selection.removeAllRanges();
    selection.addRange(range);
    editor.focus();

    // Handle Enter and Shift+Enter
    editor.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        // Regular Enter: Insert line break
        document.execCommand('insertLineBreak');
        e.preventDefault();
      } else if (e.key === 'Enter' && e.shiftKey) {
        // Shift+Enter: Complete editing
        editor.blur();
        saveContent();
        showStatus('Editing completed and saved');
        e.preventDefault();
      }
    });

    // Auto-save on input after inactivity
    editor.addEventListener('input', () => {
      clearTimeout(saveTimeout);
      saveTimeout = setTimeout(() => {
        saveContent();
        showStatus('Autosaved');
      }, AUTO_SAVE_DELAY);
    });

    // Prevent unwanted formatting
    editor.addEventListener('paste', (e) => {
      e.preventDefault();
      const text = (e.clipboardData || window.clipboardData).getData('text/plain');
      document.execCommand('insertText', false, text);
    });

    function saveContent() {
      localStorage.setItem('editorContent', editor.textContent);
    }

    function showStatus(message) {
      status.textContent = message;
      setTimeout(() => {
        status.textContent = 'Autosaved';
      }, 2000);
    }
  </script>
</body>
</html>
